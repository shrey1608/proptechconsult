---
import Layout from '../layouts/Layout.astro';
import ContextAlert from '../components/ContextAlert.astro';
import Markdown from '../components/Markdown.astro';
import { cacheHeaders, randomInt } from '../utils';

export const prerender = false;

const tags = ['/revalidation', 'cats-related', 'all-pets-related'];
const headers = cacheHeaders(365, tags);

Object.entries(headers).map(([k, v]) => {
    Astro.response.headers.set(k, v);
});

const explainer = `

At **Thinkorate**, we enhance your journey in computer science, guiding both new scholars and expert researchers to achieve groundbreaking discoveries.

We streamline your research from initial concept to final draft, ensuring each word is clear and impactful. We also assist in publishing your work in top-tier conferences such as IEEE, ACM, and Springer.

Our mentors are seasoned industry professionals, while our advisors, including PhD students and professors, guide you through the entire research process, ensuring a comprehensive and informed approach.

`;

const exampleTag = tags[randomInt(0, tags.length - 1)];
---

<Layout title="Research">
    <h1 class="mb-10">Research Support for Computer Science Innovators</h1>
    <Markdown content={explainer} class="mb-10" />
</Layout>

<script>
    function revalidate(tag: string) {
        fetch('/api/revalidate', {
            method: 'POST',
            body: JSON.stringify({ tags: [tag] }),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        alert(`Invalidated tag: ${tag}`);
    }

    const revalidateButton = document.querySelectorAll('button.revalidate-button')[0];
    revalidateButton.addEventListener('click', (e) => {
        const tag = (e.target as HTMLButtonElement).getAttribute('data-tag');
        revalidate(tag);
    });
</script>
